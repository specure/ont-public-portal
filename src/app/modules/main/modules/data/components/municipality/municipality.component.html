@if (municiaplity$ | async; as munc) {
  <ng-container *transloco="let t">
    <div class="nt-banner__wrapper">
      <div
        class="nt-banner"
        [ngStyle]="{ backgroundImage: 'url(' + images.banner + ')' }"
      ></div>
    </div>
    <div id="info" class="nt-container__row">
      <section class="nt-container__col">
        <nt-general-card>
          <div class="nt-container nt-container--padded">
            <header>
              <div class="nt-bc">
                <a class="nt-bc__link" [routerLink]="statisticsLink">
                  <mat-icon>arrow_back</mat-icon>
                  <span>{{ t('statistics.back') }}</span>
                </a>
              </div>
              <h1 class="nt-title">{{ munc | translate : 'name' }}</h1>
            </header>
            <div class="nt-container__row">
              @if (munc.website || munc.county?.website) {
                <dl
                  class="nt-container__col"
                  >
                  @if (munc.website) {
                    <dt class="nt-dt">{{ t('statistics.municipality') }}</dt>
                    <dd class="nt-dd">
                      <a [href]="munc.website" target="_blank">
                        {{ munc | translate : 'name' }}
                        {{ t('statistics.website') }}
                      </a>
                    </dd>
                  }
                  @if (munc.county?.website) {
                    <dt class="nt-dt">{{ t('statistics.county') }}</dt>
                    <dd class="nt-dd">
                      <a [href]="munc.county?.website" target="_blank">
                        {{ munc.county | translate : 'name' }}
                        {{ t('statistics.website') }}
                      </a>
                    </dd>
                  }
                </dl>
              }
              <section class="nt-container__col nt-container__col--coat">
                @if (munc.coat_of_arms) {
                  <img
                    [src]="images.coat_of_arms"
                  [alt]="
                    munc.coat_of_arms.alternativeText || munc.coat_of_arms.name
                  "
                    />
                }
              </section>
            </div>
          </div>
        </nt-general-card>
      </section>
      <section class="nt-container__col">
        <nt-general-card>
          <div class="nt-container nt-container--padded">
            <div
              class="nt-container__row"
              [class.nt-container__row--vertical]="mapLayout === 'vertical'"
              >
              <section
                class="nt-container__col nt-container__col--map-link"
                [ngStyle]="
                  munc.map_view
                    ? {}
                    : { alignItems: 'center', justifyContent: 'center' }
                "
                >
                <a [routerLink]="mapLink" (click)="setMapMunicipality(munc)">{{
                  t('statistics.go_to_map')
                }}</a>
              </section>
              @if (munc.map_view) {
                <section
                  class="nt-container__col nt-container__col--map"
                  >
                  <img
                    [src]="images.map_view"
                    [alt]="munc.map_view.alternativeText || munc.map_view.name"
                    />
                </section>
              }
            </div>
          </div>
        </nt-general-card>
      </section>
    </div>
    <div class="nt-stats__row">
      <nt-general-card appearance="full-width">
        <div class="nt-stats">
          @if (project?.enable_stats_mno_isp_switch) {
            <section
              class="nt-stats__filter"
              >
              <form [formGroup]="form">
                <mat-radio-group formControlName="providerType">
                  @for (providerType of providerTypes; track providerType) {
                    <mat-radio-button
                      [value]="providerType.value"
                      >
                      {{ t(providerType.label) }}
                    </mat-radio-button>
                  }
                </mat-radio-group>
              </form>
            </section>
          }
          @if (nationalTable$ | async; as nat) {
            <nt-table
              class="nt-stats__table"
              [action]="action"
              [columns]="columns"
              [data]="{ content: nat.statsByProvider }"
              [sort]="sort"
              [subHeaderColumns]="subHeaderColumns"
              >
            </nt-table>
            <footer class="nt-stats__footer">
              {{ t('statistics.table.disclaimer') }}
            </footer>
          } @else {
            <div class="nt-container--no-data" *transloco="let t">
              {{ t('statistics.municipality.nodata') }}
            </div>
          }
        </div>
      </nt-general-card>
    </div>
  </ng-container>
}

